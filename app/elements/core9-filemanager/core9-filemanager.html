<dom-module id="core9-filemanager">
<link rel="stylesheet" href="core9-filemanager.css">
<style>
:host {
      display: block;
      border: 1px solid red;
    }
</style>
<template>
<div>
</div>
</template> </dom-module>


<script>
	function unwrapModule(mod) {
		for (key in mod) {
			if (mod.hasOwnProperty(key)) {
				var value = mod[key];
				return value;
			}
		}
	}

	function multiImport(modules) {
		return Promise.all(modules.map(function(m) {
			return System.import(m)
		}))
	}

	multiImport(
			[ '../../bower_components/restful.js/dist/restful.min',
					'app/elements/core9-filemanager/fileapi' ]).then(
			function(modules) {

				console.log(modules);

				var restful = modules[0];
				var FILE = unwrapModule(modules[1]);

				Polymer({
					is : 'core9-filemanager',
					ready : function() {
						FILE.config({
							server : 'http://localhost:8080/',
							db : 'core9-backend',
							collection : 'files',
							rest : restful
						});

						var api = restful('localhost').port(8080);

						api.one('core9-backend/files', 1).get().then(function(response) {
							  console.log(response);
						}, function(response) {
						    // The reponse code is not >= 200 and < 400
						    console.log(response);
						    //throw new Error('Invalid response');
						});


					}
				});

			})
</script>