<!doctype html>
<html>
<head>
<title>unquote</title>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
<script src="bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
<script src="bower_components/es6-shim/es6-shim.min.js"></script>
<script src="bower_components/systemjs/dist/system.js"></script>

<script>
	//window.Polymer = window.Polymer || {};
	//window.Polymer.dom = 'shadow';
</script>
<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="app/elements/elements.html">
<style>
html, body {
	height: 100%;
	margin: 0;
	background-color: #34495e;
	font-family: sans-serif;
	z-index: 0;
}
</style>
<script>
	(function(history) {
		var pushState = history.pushState;
		history.pushState = function(state) {
			if (typeof history.onpushstate == "function") {
				history.onpushstate({
					state : state
				});
			}
			var test = arguments[2];
			if(arguments[2] == 'javascript:void(0);')return false;
			window.dispatchEvent(new CustomEvent('urlchange', { 'detail': 'some data' }));
			return pushState.apply(history, arguments);
		}
	})(window.history);
</script>
</head>
<body fullbleed>



	<iframe id="content" src="http://example.com/"
		style="border: 0; position: fixed; margin-top: 38px; margin-bottom: -38px; top: 0; left: 0; right: 0; bottom: 0; width: 100%; height: 100%; z-index: 1;"
	></iframe>
	<core9-menu id="menu" style="z-index:0;">
	<div id="workspace"
		style="width: 100%; height: 90%; background-color: #2E547B; margin-top: 20px; padding: 50px; padding-bottom: 100px; width: calc(100% - 400px); height: calc(100% - 140px);"
	>
		<core9-filemanager></core9-filemanager>
	</div>
	</core9-menu><script>
		document.getElementById('trigger').addEventListener("click",
				function() {
					toggleMenu();
				});

		new mlPushMenu(document.getElementById('mp-menu'), document
				.getElementById('trigger'));

		toggleMenu = function() {
			var trigger = document.getElementById('trigger');
			var content = document.getElementById("content");
			var menu = document.getElementById("menu");
			console.log(content.style.zIndex);
			if (menu.style.zIndex == 9) {
				menu.style.zIndex = "0";
				content.style.zIndex = "9";
			} else {
				menu.style.zIndex = "9";
				content.style.zIndex = "0";
			}
		}

		// Listen for the event.
		window.addEventListener('urlchange', function(e) {
			console.log("url changed");
			console.log(e);
			console.log(e.detail);
		}, false);
	</script>
</body>
</html>